{"version":3,"sources":["components/HoverCard/HoverCard.tsx"],"names":[],"mappings":"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","file":"components/HoverCard/HoverCard.js","sourcesContent":["/* tslint:disable:no-unused-variable */\r\nimport * as React from 'react';\r\n/* tslint:enable:no-unused-variable */\r\nimport {\r\n  BaseComponent,\r\n  autobind,\r\n  css,\r\n  divProperties,\r\n  getNativeProps,\r\n  getId\r\n} from '../../Utilities';\r\nimport { IHoverCardProps, IHoverCardStyles } from './HoverCard.Props';\r\nimport { ExpandingCard } from './ExpandingCard';\r\nimport { ExpandingCardMode } from './ExpandingCard.Props';\r\n\r\nimport { getStyles } from './HoverCard.styles';\r\n\r\nexport interface IHoverCardState {\r\n  isHoverCardVisible: boolean;\r\n  mode: ExpandingCardMode;\r\n}\r\n\r\nexport class HoverCard extends BaseComponent<IHoverCardProps, IHoverCardState> {\r\n  public static defaultProps = {\r\n    cardOpenDelay: 500,\r\n    cardDismissDelay: 100,\r\n    expandedCardOpenDelay: 1500,\r\n    instantOpenOnClick: false\r\n  };\r\n\r\n  // The wrapping div that gets the hover events\r\n  private _hoverCard: HTMLElement;\r\n  private _dismissTimerId: number;\r\n  private _openTimerId: number;\r\n\r\n  private _styles: IHoverCardStyles;\r\n\r\n  // Constructor\r\n  constructor(props: IHoverCardProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isHoverCardVisible: false,\r\n      mode: ExpandingCardMode.compact\r\n    };\r\n  }\r\n\r\n  public componentWillUpdate(newProps: IHoverCardProps, newState: IHoverCardState) {\r\n    if (newState.isHoverCardVisible !== this.state.isHoverCardVisible) {\r\n      if (newState.isHoverCardVisible) {\r\n        this._async.setTimeout(() => {\r\n          this.setState({\r\n            mode: ExpandingCardMode.expanded\r\n          });\r\n        }, this.props.expandedCardOpenDelay!);\r\n      } else {\r\n        this.setState({\r\n          mode: ExpandingCardMode.compact\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  // Render\r\n  public render() {\r\n    const {\r\n      expandingCardProps,\r\n      children,\r\n      id,\r\n      instantOpenOnClick,\r\n      setAriaDescribedBy = true,\r\n      styles: customStyles\r\n    } = this.props;\r\n    const { isHoverCardVisible, mode } = this.state;\r\n    const hoverCardId = id || getId('hoverCard');\r\n\r\n    this._styles = getStyles(customStyles);\r\n\r\n    let onClick;\r\n    if (instantOpenOnClick) {\r\n      onClick = this._instantOpenExpanded;\r\n    }\r\n    return (\r\n      <div\r\n        className={ css(this._styles.host) }\r\n        ref={ this._resolveRef('_hoverCard') }\r\n        onFocusCapture={ this._cardOpen }\r\n        onBlurCapture={ this._cardDismiss }\r\n        onMouseEnter={ this._cardOpen }\r\n        onMouseLeave={ this._cardDismiss }\r\n        onClick={ onClick }\r\n        aria-describedby={ setAriaDescribedBy && isHoverCardVisible ? hoverCardId : undefined }\r\n      >\r\n        { children }\r\n        { isHoverCardVisible &&\r\n          <ExpandingCard\r\n            { ...getNativeProps(this.props, divProperties) }\r\n            id={ hoverCardId }\r\n            targetElement={ this._getTargetElement() }\r\n            onEnter={ this._cardOpen }\r\n            onLeave={ this._cardDismiss }\r\n            mode={ mode }\r\n            { ...expandingCardProps }\r\n          />\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private _getTargetElement(): HTMLElement {\r\n    return this._hoverCard;\r\n  }\r\n\r\n  // Show HoverCard\r\n  @autobind\r\n  private _cardOpen(ev: any) {\r\n    this._async.clearTimeout(this._dismissTimerId);\r\n\r\n    this._openTimerId = this._async.setTimeout(() => {\r\n      if (!this.state.isHoverCardVisible) {\r\n        this.setState({\r\n          isHoverCardVisible: true,\r\n          mode: ExpandingCardMode.compact\r\n        });\r\n      }\r\n    }, this.props.cardOpenDelay!);\r\n  }\r\n\r\n  // Hide HoverCard\r\n  @autobind\r\n  private _cardDismiss(ev: React.MouseEvent<HTMLDivElement> | React.FocusEvent<HTMLDivElement>) {\r\n    const eventType = ev.type;\r\n    this._async.clearTimeout(this._openTimerId);\r\n\r\n    this._dismissTimerId = this._async.setTimeout(() => {\r\n      if (!(this.props.sticky && eventType === 'mouseleave')) {\r\n        this.setState({\r\n          isHoverCardVisible: false,\r\n          mode: ExpandingCardMode.compact\r\n        });\r\n      }\r\n    }, this.props.cardDismissDelay!);\r\n  }\r\n\r\n  // Instant Open the card in Expanded mode\r\n  @autobind\r\n  private _instantOpenExpanded(ev: React.MouseEvent<HTMLDivElement>) {\r\n    this.setState({\r\n      isHoverCardVisible: true,\r\n      mode: ExpandingCardMode.expanded\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}